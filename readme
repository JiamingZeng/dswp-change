need do phi elimination first? (assume no phi first, but will too many memory dependency limit our chance of parallel)

carefully deduplicate the dependency?

if there is a dependency for branch

reasonable latency table

TODO block cannot be split ?

modify the function declaration

unoptimized code could split into several thread, but optimized code might not!